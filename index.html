<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Espetinho Nota 10</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  color:white;
  background:
    linear-gradient(rgba(0,0,0,0.75), rgba(0,0,0,0.75)),
    url("https://images.unsplash.com/photo-1555939594-58d7cb561ad1");
  background-size:cover;
  background-position:center;
}

header{
  text-align:center;
  padding:40px 20px;
  background:#000;
  border-bottom:4px solid #ff9800;
}

header h1{
  margin:0;
  color:#ff9800;
  font-size:36px;
}

section, .card{
  max-width:900px;
  margin:30px auto;
  padding:25px;
  background:rgba(0,0,0,0.85);
  border-radius:10px;
}

h2,h3{color:#ff9800}

.item{
  display:flex;
  justify-content:space-between;
  background:#1f1f1f;
  padding:15px;
  margin-top:10px;
  border-left:5px solid #ff9800;
  border-radius:8px;
}

input, textarea, select{
  width:100%;
  padding:10px;
  border-radius:6px;
  border:none;
}

.botao{
  display:block;
  margin:15px auto;
  background:#ff9800;
  color:#000;
  padding:15px;
  border-radius:8px;
  font-weight:bold;
  text-align:center;
  text-decoration:none;
  cursor:pointer;
}

.whatsapp{
  position:fixed;
  bottom:20px;
  right:20px;
  width:60px;
  height:60px;
  background:#25d366;
  color:white;
  font-size:32px;
  text-align:center;
  line-height:60px;
  border-radius:50%;
  text-decoration:none;
}
</style>
</head>

<body>

<header>
  <h1>Espetinho Nota 10</h1>
  <p>Sabor de verdade na brasa ğŸ”¥</p>
</header>

<section>
<h2>ğŸ¢ CardÃ¡pio</h2>
<div class="item"><span>Gado simples</span><strong>R$ 15,00</strong></div>
<div class="item"><span>Gado completo</span><strong>R$ 20,00</strong></div>
<div class="item"><span>Misto</span><strong>R$ 25,00</strong></div>
</section>

<section>
<h2>ğŸ“ Fazer pedido</h2>

<label>Nome:</label>
<input id="nome">

<label>Produto:</label>
<select id="produto">
<option value="15">Gado simples - R$15</option>
<option value="20">Gado completo - R$20</option>
<option value="25">Misto - R$25</option>
</select>

<label>Quantidade:</label>
<input type="number" id="quantidade" value="1" min="1">

<label>EndereÃ§o:</label>
<textarea id="endereco"></textarea>

<label>ğŸ“ LocalizaÃ§Ã£o GPS:</label>
<input id="localizacao" readonly placeholder="Clique no botÃ£o abaixo">

<button class="botao" onclick="pegarLocalizacao()">ğŸ“ Usar minha localizaÃ§Ã£o</button>

<p id="total"><strong>Total: R$ 15,00</strong></p>

<button class="botao" onclick="finalizarPedido()">Finalizar Pedido</button>
</section>

<div class="card">
  <h3>ğŸ“œ HistÃ³rico de pedidos</h3>
  <div id="historico"></div>
  <button class="botao" onclick="limparHistorico()">ğŸ—‘ï¸ Limpar histÃ³rico</button>
</div>

<section>
<h2>ğŸ“ Onde estamos</h2>
<iframe src="https://www.google.com/maps?q=Brasil&output=embed"
width="100%" height="300" style="border:0;border-radius:10px;"></iframe>
</section>

<footer style="text-align:center;padding:20px;background:#000;">
Â© 2026 - Espetinho Nota 10
</footer>

<a class="whatsapp" href="https://wa.me/5599984772668" target="_blank">ğŸ’¬</a>

<script>
const produto = document.getElementById("produto");
const quantidade = document.getElementById("quantidade");
const total = document.getElementById("total");

const LOJA_LAT = -5.5266;
const LOJA_LON = -47.4821;
let taxaEntrega = 0;

function atualizarTotal(){
  const subtotal = produto.value * quantidade.value;
  total.innerText =
    `Total: R$ ${(subtotal + taxaEntrega).toFixed(2)} (Entrega: R$ ${taxaEntrega})`;
}

produto.onchange = atualizarTotal;
quantidade.oninput = atualizarTotal;

function calcularDistancia(lat1, lon1, lat2, lon2){
  const R = 6371;
  const dLat = (lat2-lat1) * Math.PI/180;
  const dLon = (lon2-lon1) * Math.PI/180;
  const a =
    Math.sin(dLat/2)**2 +
    Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*
    Math.sin(dLon/2)**2;
  return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
}

function pegarLocalizacao(){
  navigator.geolocation.getCurrentPosition(pos=>{
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;

    const dist = calcularDistancia(LOJA_LAT, LOJA_LON, lat, lon);

    taxaEntrega = dist <= 2 ? 3 : dist <= 5 ? 5 : 8;

    document.getElementById("localizacao").value =
      `https://www.google.com/maps?q=${lat},${lon}`;

    atualizarTotal();
  });
}

function salvarPedido(pedido){
  let h = JSON.parse(localStorage.getItem("pedidos")) || [];
  h.unshift(pedido);
  localStorage.setItem("pedidos", JSON.stringify(h));
}

function carregarHistorico(){
  const h = JSON.parse(localStorage.getItem("pedidos")) || [];
  const div = document.getElementById("historico");
  div.innerHTML = h.length ? "" : "<p>Nenhum pedido ainda.</p>";

  h.forEach(p=>{
    div.innerHTML += `
      <div style="background:#111;padding:10px;border-radius:8px;margin-bottom:10px;">
        <strong>${p.data}</strong><br>
        ğŸ’° R$ ${p.total}<br>
        ğŸ“ ${p.endereco}
      </div>`;
  });
}

function limparHistorico(){
  localStorage.removeItem("pedidos");
  carregarHistorico();
}

function finalizarPedido(){
  const subtotal = produto.value * quantidade.value;
  const totalFinal = (subtotal + taxaEntrega).toFixed(2);

  const pedido = {
    data: new Date().toLocaleString(),
    total: totalFinal,
    endereco: endereco.value
  };

  salvarPedido(pedido);
  carregarHistorico();

  const msg =
`ğŸ¢ Pedido Espetinho Nota 10
Nome: ${nome.value}
Produto: ${produto.options[produto.selectedIndex].text}
Qtd: ${quantidade.value}
Total: R$ ${totalFinal}
EndereÃ§o: ${endereco.value}
LocalizaÃ§Ã£o: ${localizacao.value}`;

  window.open("https://wa.me/5599984772668?text="+encodeURIComponent(msg));
}

carregarHistorico();
</script>

</body>
</html>
